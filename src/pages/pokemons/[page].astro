---
import type { GetStaticPaths } from "astro";
import MainLayout from "@layouts/MainLayout.astro";
import type { PokemonList } from "@interfaces/Pokemon";
import PokemonCard from "@components/pokemons/PokemonCard.astro";
import Title from "@components/shared/Title.astro";


export const getStaticPaths = (async({ paginate }) => {
	const response = await fetch("https://pokeapi.co/api/v2/pokemon?limit=150");
	const { results } = await response.json() as PokemonList;
	const test = paginate(results, { pageSize: 20 });
	return test;
}) satisfies GetStaticPaths;

const { page } = Astro.props;

---

<MainLayout 
	title="Listado de Pokemons"
	description={`Listado de Pokemons - Pagina ${page.currentPage}`}>
	<Title>Listado Paginado</Title>

	<section class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-4 mt-10" aria-label="Listado de Pokemons" >
		{ page.data.map(({name, url}) => <PokemonCard name={name} url={url} ></PokemonCard>)}
	</section>

	<section class="flex mt-10 gap-2 items-center" >

		<a class:list={[ 'btn', { disabled: !page.url.prev } ]} href={ page.url.prev }>Anteriores</a>
		<a class:list={[ 'btn', { disabled: !page.url.next } ]} href={ page.url.next }>Siguientes</a>

		<div class="flex flex-1"></div>

		<span class="text-xl font-bold">PÃ¡gina { page.currentPage }</span>
	</section>

</MainLayout>

<style>
	@reference '@styles/global.css';
	.btn {
		@apply bg-blue-500 p-2 text-white rounded-md;
	}
	.disabled {
		@apply bg-gray-600 text-gray-400;
	}
</style>
